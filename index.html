<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Sync Card Game Ultimate</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  font-family:sans-serif;
  background:linear-gradient(#0d0d18,#1a1a2e);
  color:white;
  text-align:center;
  overflow-x:hidden;
}
header{
  background:#111;
  padding:10px;
  font-size:20px;
}

.card{
  width:110px;
  height:160px;
  border-radius:12px;
  padding:8px;
  margin:6px;
  display:inline-block;
  position:relative;
  transition:0.3s;
  box-shadow:0 0 10px rgba(0,0,0,0.6);
}
.card:hover{transform:scale(1.1);}

.Common{background:#444;}
.Uncommon{background:#1e5f1e;}
.Rare{background:#1e3e8f;}
.Epic{background:purple;animation:glow 1.5s infinite alternate;}
.Legend{background:orange;animation:glow 1s infinite alternate;}
.Mythic{background:deeppink;animation:glow 0.8s infinite alternate;}
.Godly{background:linear-gradient(45deg,cyan,magenta,yellow);animation:rainbow 2s infinite linear;}

@keyframes glow{
 from{box-shadow:0 0 5px white;}
 to{box-shadow:0 0 20px white;}
}
@keyframes rainbow{
 0%{filter:hue-rotate(0deg)}
 100%{filter:hue-rotate(360deg)}
}

/* スライド */
.playedCard{
 position:fixed;
 bottom:20%;
 left:50%;
 transform:translateX(-50%) scale(1.2);
 animation:slideUp 0.4s ease-out;
}
@keyframes slideUp{
 from{transform:translate(-50%,100%) scale(0.8);opacity:0;}
 to{transform:translate(-50%,0) scale(1.2);opacity:1;}
}

/* ダメージ */
.damage{
 position:fixed;
 font-size:28px;
 font-weight:bold;
 animation:floatUp 0.8s ease-out forwards;
 pointer-events:none;
}
@keyframes floatUp{
 from{transform:translateY(0);opacity:1;}
 to{transform:translateY(-60px);opacity:0;}
}

/* 画面揺れ */
.shake{animation:shakeAnim 0.4s;}
@keyframes shakeAnim{
 0%{transform:translate(0,0);}
 20%{transform:translate(-8px,5px);}
 40%{transform:translate(8px,-5px);}
 60%{transform:translate(-6px,3px);}
 80%{transform:translate(6px,-3px);}
 100%{transform:translate(0,0);}
}

/* ガチャ */
.packCard{
 width:140px;
 height:200px;
 background:#222;
 border-radius:12px;
 margin:20px auto;
 line-height:200px;
 font-size:20px;
 cursor:pointer;
}
</style>
</head>
<body>

<header>Sync Card Game Ultimate</header>

<p>HP: <span id="pHP">20</span> | AI: <span id="aHP">20</span></p>

<button onclick="openPack()">パック開封</button>

<div id="hand"></div>
<div id="gachaArea"></div>

<audio id="soundPlay" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="soundRare" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>

<script>
let playerHP=20;
let aiHP=20;
let deck=[];
let hand=[];
let serial=1;

const cardPool=[
 {name:"フレア",damage:2,rarity:"Common"},
 {name:"量子斬撃",damage:4,rarity:"Uncommon"},
 {name:"爆炎同期",damage:3,syncBonus:2,rarity:"Rare"},
 {name:"星核崩壊",damage:6,rarity:"Epic"},
 {name:"Ω-CORE",damage:10,rarity:"Legend"},
 {name:"創世神コード",damage:20,rarity:"Godly"}
];

function init(){
 for(let i=0;i<5;i++) drawCard();
 updateUI();
}
function drawCard(){
 let c=JSON.parse(JSON.stringify(cardPool[Math.floor(Math.random()*cardPool.length)]));
 c.serial=serial++;
 hand.push(c);
 renderHand();
}
function renderHand(){
 handDiv=document.getElementById("hand");
 handDiv.innerHTML="";
 hand.forEach((c,i)=>{
  let d=document.createElement("div");
  d.className="card "+c.rarity;
  d.innerHTML="<b>"+c.name+"</b><br>"+c.rarity;
  d.onclick=()=>playCard(i);
  handDiv.appendChild(d);
 });
}

function playCard(i){
 let p=hand.splice(i,1)[0];
 let a=cardPool[Math.floor(Math.random()*cardPool.length)];
 animatePlay(p);
 playSound("play");

 let pD=p.damage||0;
 let aD=a.damage||0;

 aiHP-=pD;
 playerHP-=aD;

 if(pD>0) showDamage(pD,"ai");
 if(aD>0){ showDamage(aD,"player"); shakeScreen(); }

 if(p.rarity==="Epic"||p.rarity==="Legend"||p.rarity==="Godly"){
  playSound("rare");
 }

 updateUI();
 drawCard();
}

function updateUI(){
 document.getElementById("pHP").textContent=playerHP;
 document.getElementById("aHP").textContent=aiHP;
}

function animatePlay(card){
 const el=document.createElement("div");
 el.className="card "+card.rarity+" playedCard";
 el.innerHTML="<b>"+card.name+"</b>";
 document.body.appendChild(el);
 setTimeout(()=>el.remove(),600);
}

function showDamage(amount,target){
 const el=document.createElement("div");
 el.className="damage";
 el.textContent="-"+amount;
 el.style.left=target==="player"?"30%":"70%";
 el.style.top="40%";
 el.style.color=target==="player"?"red":"orange";
 document.body.appendChild(el);
 setTimeout(()=>el.remove(),800);
}

function shakeScreen(){
 document.body.classList.add("shake");
 setTimeout(()=>document.body.classList.remove("shake"),400);
}

function playSound(type){
 if(type==="play") document.getElementById("soundPlay").play();
 if(type==="rare") document.getElementById("soundRare").play();
}

function openPack(){
 let cards=[];
 for(let i=0;i<3;i++){
  cards.push(cardPool[Math.floor(Math.random()*cardPool.length)]);
 }
 openPackAnimation(cards);
}

function openPackAnimation(cards){
 const area=document.getElementById("gachaArea");
 area.innerHTML="";
 let index=0;

 function reveal(){
  if(index>=cards.length){area.innerHTML="";return;}
  let card=cards[index];
  let div=document.createElement("div");
  div.className="packCard";
  div.textContent="TAP";
  div.onclick=()=>{
   div.className="card "+card.rarity;
   div.innerHTML="<b>"+card.name+"</b><br>"+card.rarity;
   if(card.rarity==="Epic"||card.rarity==="Legend"||card.rarity==="Godly"){
    playSound("rare");
   }
   index++;
   setTimeout(reveal,800);
  };
  area.appendChild(div);
 }
 reveal();
}

init();
</script>
</body>
</html>
